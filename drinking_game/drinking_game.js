var json_data = `
{
    "data_dg" : [
        {
            "YN": "Yo nunca he vuelto con mi ex",
            "P": "P 1",
            "R": "R 1"
        },
        {
            "YN": "Yo nunca me he liado con el ex de un amig@",
            "P": "P 2",
            "R": "R 2"
        },
        {
            "YN": "Yo nunca he escrito a mi ex una noche de fiesta",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he estado más de tres días sin ducharme",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he stalkeado el instagram del el/la ex de mi novi@",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he imaginado siendo del sexo opuesto",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca mentí en el Yo Nunca",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he ligado con el novi@ de un amig@",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he sido pillado masturbándome",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he pillado a un familiar masturbándose",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he pillado a un familiar teniendo sexo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he pillado a un amigo teniendo sexo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca lo he hecho en un sitio público",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca lo he hecho en el mar",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca lo he hecho en el probador de una tienda",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca lo he hecho en un coche",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca lo he hecho en una moto",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he sentido atraído por alguien del mismo sexo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he sentido atraído por alguien de este grupo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he sentido atraído por un profesor o profesora",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he sentido atraído por la pareja de una amistad",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he estado esposado",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he robado algo de menos de 100 euros",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he robado algo de más de 100 euros",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he masturbado con un objeto extraño",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he masturbado fuera de casa",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he probado la comida para animales",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he sentido atraído por una persona mayor de 40 (no famos@)",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he espiado la nueva pareja de mi ex por redes",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he robado copas de una discoteca",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he liado con una persona de este grupo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he tenido más de tres orgasmos en un día",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he usado juguetes sexuales con mi pareja",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he sido infiel",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he vomitado en público después de beber",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he paseado por casa desnudo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he liado con una persona casada",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he vestido con ropa del sexo opuesto",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he visto a mis padres desnudos",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he pillado a mis padres teniendo sexo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he hecho un test de embarazo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he masturbado más de 3 veces en un día",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he masturbado más de 5 veces en un día",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he roto la cama",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he emborrachado por la mañana",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he probado el cibersexo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he jugado a ser otra persona durante el sexo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he gritado el nombre de otra persona durante el sexo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he hecho cosas indecentes en el cine",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he besado a alguien sin saber su nombre",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he visto porno con mi pareja",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he hecho sexo oral conduciendo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he recibido sexo oral conduciendo",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he tenido un fetiche extraño",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca me he sentido sexualmente atraído/a por un personaje de dibujos animados",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he meado en la ducha",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he mandado una captura de pantalla a la persona que estaba intentando criticar sin querer",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he respondido gracias cuando me han dicho te quiero",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he llevado los mismos calcetines más de tres días seguidos",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he cagado en el mar",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he cagado en el monte",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he cagado en la calle",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he hecho como que no encontraba las llaves/mirado el móvil para no saludar a alguien por la calle",
            "P": "P 3",
            "R": "R 3"
        },
        {
            "YN": "Yo nunca he salido a la calle en pijama",
            "P": "P 3",
            "R": "R 3"
        }
    ]
}`;

var obj = JSON.parse(json_data);

var players = [];

function addPlayer(){

    var newArray = document.getElementById("age").value;
    if (newArray == "" || newArray == null) {

    } else {
        players.push(newArray);
        document.getElementById("age").value = " ";
        document.getElementById("players").innerHTML = players;
    }

}

function play() {

    var random_1 = Math.floor(Math.random() * obj["data_dg"].length);

    var random_2 = Math.floor(Math.random() * 2);

    // Referencia de cuántas preguntas hay
    console.log(obj["data_dg"].length);

    cleanScreen();
    loadingContent();

    switch (random_2) {
        case 0:
            setTimeout(yoNunca, 770*2.5, obj["data_dg"][random_1]["YN"]);
            break;
        
        case 1:
            var random_name = Math.floor(Math.random() * players.length);
            var player_selected = players[random_name];
            setTimeout(pruebaOReto, 770*2.5, random_1, player_selected);
            break;
    
        default:
            break;
    }
    
}

function cleanScreen() {

    if (document.getElementById("age")) {
        var form = document.getElementById("age");
        form.remove();
    }

    if (document.getElementById("player_button")) {
        var form = document.getElementById("player_button");
        form.remove();
    }

    if (document.getElementById("players")) {
        var form = document.getElementById("players");
        form.remove();
    }

    if (document.getElementById("player_text")) {
        var form = document.getElementById("player_text");
        form.remove();
    }

    if (document.getElementById("play_button")) {
        var button = document.getElementById("play_button");
        button.remove();
    }

    if (document.getElementById("github_div")) {
        var githubDiv = document.getElementById("github_div");
        githubDiv.remove()
    }

    if (document.getElementById("yn_title_text")) {
        var ynTitleDiv = document.getElementById("yn_title_text");
        ynTitleDiv.remove()
    }

    if (document.getElementById("br1")) {
        var br1 = document.getElementById("br1");
        br1.remove()
    }

    if (document.getElementById("yn_text")) {
        var ynDiv = document.getElementById("yn_text");
        ynDiv.remove()
    }

    if (document.getElementById("prueba_button")) {
        var pruebaButton = document.getElementById("prueba_button");
        pruebaButton.remove()
    }

    if (document.getElementById("reto_button")) {
        var retoButton = document.getElementById("reto_button");
        retoButton.remove()
    }
    
}

function loadingContent() {
    if (document.getElementById('loading_img')) {

    } else {
        var img = document.createElement('img');
        img.src = "assets/beer.gif";
        img.alt = "Beer loading gif";
        img.classList.add('loading_img');
        img.setAttribute('id', 'loading_img');
        img.width = 60;
        var src = document.getElementById('content');
        src.appendChild(img);
        setTimeout(removeLoading, 1800);
    }
}

function removeLoading() {
    if (document.getElementById('loading_img')) {
        var element = document.getElementById('loading_img');
        element.remove();
    }
}

function putNextButton() {
    
    var nextButtonDiv = document.createElement("div");
    var nextButton = document.createElement("button");
    nextButton.onclick = function() {
        play();
    };
    nextButton.classList = "play_button";
    nextButton.id = "play_button";
    nextButton.innerHTML = "Siguiente";
    nextButtonDiv.appendChild(nextButton);

    document.getElementById("content").appendChild(nextButtonDiv);

}

function yoNunca(text) {
    
    // First we delete the main screen
    cleanScreen()

    // Then we put:
    //  1. Text
    var textYNDiv = document.createElement("div");
    var textYNDivContent = document.createTextNode("Yo Nunca...");
    textYNDiv.appendChild(textYNDivContent);
    textYNDiv.classList = "yn_title_text";
    textYNDiv.id = "yn_title_text";

    document.getElementById("content").appendChild(textYNDiv);

    var br1 = document.createElement("br");
    br1.id = "br1";
    document.getElementById("content").appendChild(br1);

    var textDiv = document.createElement("div");
    var textContent = document.createTextNode(text);
    textDiv.appendChild(textContent);
    textDiv.classList = "yn_text";
    textDiv.id = "yn_text";

    document.getElementById("content").appendChild(textDiv);

    //  2. Button
    putNextButton();
}

function pruebaOReto(index, player_selected) {

    // First we delete the main screen
    cleanScreen();
    
    var playerDiv = document.createElement("div");
    var playerContent = document.createTextNode(player_selected);
    playerDiv.appendChild(playerContent);
    playerDiv.classList = "player_text";
    playerDiv.id = "player_text";

    document.getElementById("content").appendChild(playerDiv);

    document.getElementById("content").appendChild(document.createElement("br"));

    // Then we put:
    //  1. Button Prueba
    var pruebaButtonDiv = document.createElement("div");
    var pruebaButton = document.createElement("button");
    pruebaButton.onclick = function() {
        pruebaPlay(index, player_selected);
    };
    pruebaButton.classList = "play_button";
    pruebaButton.id = "prueba_button";
    pruebaButton.innerHTML = "Prueba";
    pruebaButtonDiv.appendChild(pruebaButton);

    document.getElementById("content").appendChild(pruebaButtonDiv);

    //  1. Button Reto
    var retoButtonDiv = document.createElement("div");
    var retoButton = document.createElement("button");
    retoButton.onclick = function() {
        retoPlay(index, player_selected);
    };
    retoButton.classList = "play_button";
    retoButton.id = "reto_button";
    retoButton.innerHTML = "Verdad";
    retoButtonDiv.appendChild(retoButton);

    document.getElementById("content").appendChild(retoButtonDiv);
    
}

function prText(pr_text, pr, index, player_selected) {

    var textPDiv = document.createElement("div");
    var textPDivContent = document.createTextNode(pr_text);
    textPDiv.appendChild(textPDivContent);
    textPDiv.classList = "yn_title_text";
    textPDiv.id = "yn_title_text";

    document.getElementById("content").appendChild(textPDiv);

    var br1 = document.createElement("br");
    br1.id = "br1";
    document.getElementById("content").appendChild(br1);

    var textDiv = document.createElement("div");
    var textContent = document.createTextNode(obj["data_dg"][index][pr]);
    textDiv.appendChild(textContent);
    textDiv.classList = "yn_text";
    textDiv.id = "yn_text";

    document.getElementById("content").appendChild(textDiv);

}

function pruebaPlay(index, player_selected) {
    
    // First we delete the main screen
    cleanScreen()

    // Then we put:
    //  1. Text
    prText("Prueba: ", "P", index, player_selected);

    //  2. Button
    putNextButton();

}

function retoPlay(index, player_selected) {

    // First we delete the main screen
    cleanScreen()

    // Then we put:
    //  1. Text
    prText("Verdad: ", "R", index, player_selected);

    //  2. Button
    putNextButton();

}